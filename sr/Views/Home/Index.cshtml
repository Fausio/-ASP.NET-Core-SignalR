@{
    ViewData["Title"] = "Notificações";
}

<h1>Notificações</h1>

<button id="enviarNotificacao">Enviar Notificação</button>

<div id="resultado"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.16/signalr.min.js"></script>
<script>
    const connection = new signalR.HubConnectionBuilder()
        .withUrl("/signalHub")
        .build();

    connection.on("ReceiveNotification", function (message) {
        const div = document.getElementById("resultado");
        div.innerHTML += `<p><strong>🔔</strong> ${message}</p>`;
    });

    connection.start()
        .then(() => console.log("✅ Conectado ao SignalR"))
        .catch(err => console.error("❌ Erro:", err));

    document.getElementById("enviarNotificacao").addEventListener("click", function () {
        fetch("/Home/EnviarNotificacao", { method: "POST" });
    });
</script>
